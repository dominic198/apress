(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{LSyF:function(t,e,n){"use strict";n.r(e),n.d(e,"NotesModule",function(){return B});var o=n("tyNb"),s=n("fXoL"),r=n("2Vo4"),c=n("z6cu"),a=n("lJxs"),i=n("JIr8"),d=n("vkgz"),b=n("CqG3"),l=n("HELT");let u=(()=>{class t{constructor(t,e){this.afDb=t,this.auth=e,this.USERS_COLLECTION="users",this.NOTES_COLLECTION="notes",this.isLoading$=new r.a(!0)}get timestamp(){return(new Date).getTime()}getUserNotesCollection(){return this.afDb.collection(this.USERS_COLLECTION+"/"+this.auth.id+"/"+this.NOTES_COLLECTION,t=>t.orderBy("updated_at","desc"))}addNote(t){return this.getUserNotesCollection().add(Object.assign(Object.assign({},t),{created_at:this.timestamp,updated_at:this.timestamp}))}editNote(t,e){return this.getUserNotesCollection().doc(t).update(Object.assign(Object.assign({},e),{updated_at:this.timestamp}))}deleteNote(t){return this.getUserNotesCollection().doc(t).delete()}getNote(t){return this.getUserNotesCollection().doc(t).snapshotChanges().pipe(Object(a.a)(t=>{const e=t.payload.data();return Object.assign({id:t.payload.id},e)}),Object(i.a)(t=>Object(c.a)(t)))}getNotes(){return this.getUserNotesCollection().snapshotChanges().pipe(Object(a.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})),Object(d.a)(t=>{this.isLoading$.next(!1)}),Object(i.a)(t=>Object(c.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(b.AngularFirestore),s.Vb(l.a))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=n("ofXK"),f=n("Wp6s"),g=n("NFeN");function h(t,e){1&t&&(s.Rb(0,"button",3),s.Rb(1,"mat-icon"),s.sc(2,"edit"),s.Qb(),s.Qb())}function m(t,e){1&t&&s.Nb(0,"mat-progress-bar",4)}let N=(()=>{class t{constructor(){this.edit=!0}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-note-card"]],inputs:{note:"note",loading:"loading",edit:"edit"},decls:11,vars:8,consts:[[1,"text-right"],["color","primary",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["color","primary"],["mode","indeterminate"]],template:function(t,e){1&t&&(s.Rb(0,"mat-card"),s.Rb(1,"mat-card-title"),s.sc(2),s.Qb(),s.Rb(3,"mat-card-subtitle"),s.sc(4),s.bc(5,"date"),s.Qb(),s.Rb(6,"mat-card-content"),s.sc(7),s.Qb(),s.Rb(8,"mat-card-footer",0),s.qc(9,h,3,0,"button",1),s.qc(10,m,1,0,"mat-progress-bar",2),s.Qb(),s.Qb()),2&t&&(s.Cb(2),s.tc(e.note.title),s.Cb(2),s.tc(s.dc(5,5,e.note.created_at,"short")),s.Cb(3),s.tc(e.note.content),s.Cb(2),s.gc("ngIf",e.edit),s.Cb(1),s.gc("ngIf",e.loading))},directives:[f.a,f.f,f.e,f.b,f.c,p.l,g.a],pipes:[p.e],styles:[""]}),t})();const v=function(t){return["/notes",t]};function y(t,e){if(1&t&&(s.Nb(0,"app-note-card",3),s.bc(1,"async")),2&t){const t=e.$implicit,n=s.ac(2);s.gc("note",t)("loading",s.cc(1,3,n.isDbLoading$))("routerLink",s.hc(5,v,t.id))}}function I(t,e){if(1&t&&(s.Rb(0,"div"),s.qc(1,y,2,7,"app-note-card",2),s.Qb()),2&t){const t=e.ngIf;s.Cb(1),s.gc("ngForOf",t)}}function C(t,e){1&t&&(s.Rb(0,"mat-card"),s.Rb(1,"mat-card-title"),s.sc(2," Either you have no notes "),s.Qb(),s.Qb())}let O=(()=>{class t{constructor(t){this.db=t}ngOnInit(){this.notes$=this.db.getNotes(),this.isDbLoading$=this.db.isLoading$}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(u))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-notes-list"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[3,"note","loading","routerLink",4,"ngFor","ngForOf"],[3,"note","loading","routerLink"]],template:function(t,e){if(1&t&&(s.qc(0,I,2,1,"div",0),s.bc(1,"async"),s.qc(2,C,3,0,"ng-template",null,1,s.rc)),2&t){const t=s.jc(3);s.gc("ngIf",s.cc(1,2,e.notes$))("ngIfElse",t)}},directives:[p.l,p.k,N,o.c,f.a,f.f],pipes:[p.b],styles:[""]}),t})();var R=n("XNiG"),E=n("t6Rh"),Q=n("3Pt+"),k=n("kmnG"),w=n("qFsG"),L=n("ihCf"),$=n("bTqV");let M=(()=>{class t{constructor(t){this.fb=t,this.saveNote=new s.n,this.sendError=new s.n}ngOnInit(){this.createForm(),this.note&&this.noteForm.patchValue(this.note)}createForm(){this.noteForm=this.fb.group({title:["",Q.l.required],content:["",Q.l.required]})}addNote(){this.noteForm.valid?this.saveNote.emit(this.noteForm.value):this.sendError.emit("please fill all fields")}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(Q.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-note-form"]],inputs:{note:"note"},outputs:{saveNote:"saveNote",sendError:"sendError"},decls:11,vars:1,consts:[[1,"note-container",3,"formGroup"],["matInput","","placeholder","Enter your title","formControlName","title","required",""],["matInput","","placeholder","Leave a comment","formControlName","content","required","","cdkTextareaAutosize",""],[1,"text-right"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"mat-form-field"),s.Nb(2,"input",1),s.Qb(),s.Nb(3,"br"),s.Rb(4,"mat-form-field"),s.Nb(5,"textarea",2),s.Qb(),s.Qb(),s.Nb(6,"br"),s.Nb(7,"br"),s.Rb(8,"div",3),s.Rb(9,"button",4),s.Yb("click",function(){return e.addNote()}),s.sc(10,"Save"),s.Qb(),s.Qb()),2&t&&s.gc("formGroup",e.noteForm)},directives:[Q.h,Q.d,k.c,w.a,Q.a,Q.g,Q.c,Q.k,L.b,$.a],styles:[".note-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.note-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]}),t})();function q(t,e){if(1&t&&(s.Rb(0,"mat-card-subtitle",2),s.sc(1),s.Qb()),2&t){const t=e.ngIf;s.Cb(1),s.uc(" ",t," ")}}function j(t,e){if(1&t&&(s.Rb(0,"mat-card-subtitle",8),s.sc(1),s.Qb()),2&t){const t=e.ngIf;s.Cb(1),s.uc(" ",t," ")}}function F(t,e){if(1&t){const t=s.Sb();s.Rb(0,"mat-card"),s.qc(1,j,2,1,"mat-card-subtitle",6),s.bc(2,"async"),s.Rb(3,"mat-card-content"),s.Rb(4,"app-note-form",7),s.Yb("saveNote",function(e){return s.kc(t),s.ac(2).saveNote(e)})("sendError",function(e){return s.kc(t),s.ac(2).sendError(e)}),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.ac().ngIf,e=s.ac();s.Cb(1),s.gc("ngIf",s.cc(2,2,e.errorMessages$)),s.Cb(3),s.gc("note",t)}}function S(t,e){if(1&t&&(s.Nb(0,"app-note-card",9),s.bc(1,"async")),2&t){const t=s.ac().ngIf,e=s.ac();s.gc("note",t)("loading",s.cc(1,2,e.isDbLoading$))}}function _(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div"),s.qc(1,F,5,4,"mat-card",2),s.qc(2,S,2,4,"app-note-card",3),s.Rb(3,"button",4),s.Yb("click",function(){return s.kc(t),s.ac().delete()}),s.Rb(4,"mat-icon"),s.sc(5,"delete"),s.Qb(),s.Qb(),s.Rb(6,"button",5),s.Yb("click",function(){return s.kc(t),s.ac().edit()}),s.Rb(7,"mat-icon"),s.sc(8,"edit"),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.ac();s.Cb(1),s.gc("ngIf",t.isEdit),s.Cb(1),s.gc("ngIf",!t.isEdit)}}function x(t,e){1&t&&s.Nb(0,"mat-spinner")}const G=[{path:"",component:O},{path:"add",component:(()=>{class t{constructor(t,e,n){this.router=t,this.data=e,this.snackBar=n,this.errorMessages$=new R.a}onSaveNote(t){this.data.addNote(t).then(t=>{this.router.navigate(["/notes"]),this.snackBar.open(`Note ${t.id} has been successfully saved`)}).catch(t=>{this.errorMessages$.next("something is wrong when adding to DB")})}onSendError(t){this.errorMessages$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(o.b),s.Mb(u),s.Mb(E.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-notes-add"]],decls:7,vars:3,consts:[["class","error",4,"ngIf"],[3,"saveNote","sendError"],[1,"error"]],template:function(t,e){1&t&&(s.Rb(0,"mat-card"),s.Rb(1,"mat-card-title"),s.sc(2,"New Note"),s.Qb(),s.qc(3,q,2,1,"mat-card-subtitle",0),s.bc(4,"async"),s.Rb(5,"mat-card-content"),s.Rb(6,"app-note-form",1),s.Yb("saveNote",function(t){return e.onSaveNote(t)})("sendError",function(t){return e.onSendError(t)}),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.Cb(3),s.gc("ngIf",s.cc(4,1,e.errorMessages$)))},directives:[f.a,f.f,p.l,f.b,M,f.e],pipes:[p.b],styles:[""]}),t})()},{path:":id",component:(()=>{class t{constructor(t,e,n,o){this.data=t,this.route=e,this.snackBar=n,this.router=o,this.errorMessages$=new R.a}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");this.id=t,this.note$=this.data.getNote(t),this.isDbLoading$=this.data.isLoading$}delete(){confirm("Are you sure?")&&this.data.deleteNote(this.id).then(()=>{this.router.navigate(["/notes"]),this.snackBar.open(`${this.id} successfully was deleted`)}).catch(t=>{this.snackBar.open("Unable to delete this note")})}edit(){this.isEdit=!this.isEdit}saveNote(t){this.data.editNote(this.id,t).then(()=>{this.snackBar.open("Successfully done"),this.edit()}).catch(t=>{this.snackBar.open("Unable to edit this note"),this.edit()})}sendError(t){this.errorMessages$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(u),s.Mb(o.a),s.Mb(E.a),s.Mb(o.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-note-details"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["spinner",""],[4,"ngIf"],[3,"note","loading",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click"],["class","error",4,"ngIf"],[3,"note","saveNote","sendError"],[1,"error"],[3,"note","loading"]],template:function(t,e){if(1&t&&(s.qc(0,_,9,2,"div",0),s.bc(1,"async"),s.qc(2,x,1,0,"ng-template",null,1,s.rc)),2&t){const t=s.jc(3);s.gc("ngIf",s.cc(1,2,e.note$))("ngIfElse",t)}},directives:[p.l,$.a,g.a,f.a,f.b,M,f.e,N],pipes:[p.b],styles:[""]}),t})()}];let T=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(G)],o.d]}),t})();var U=n("FpXt");let B=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[U.a,T,p.c]]}),t})()}}]);